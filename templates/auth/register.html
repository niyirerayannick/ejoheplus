{% extends "base.html" %}
{% load static %}

{% block title %}Register - EjoHePlus{% endblock %}

{% block content %}
<section class="min-h-screen flex items-center justify-center py-20 bg-gray-50 relative overflow-hidden">
    <!-- Abstract Background Decorations -->
    <div class="absolute top-0 right-0 w-96 h-96 bg-[#003d29]/5 rounded-full translate-x-1/2 -translate-y-1/2 blur-3xl"></div>
    <div class="absolute bottom-0 left-0 w-[500px] h-[500px] bg-[#ff9800]/5 rounded-full -translate-x-1/4 translate-y-1/4 blur-3xl"></div>
    
    <div class="max-w-6xl w-full mx-auto px-4 sm:px-6 lg:px-8 relative z-10">
        <div class="bg-white rounded-[40px] shadow-2xl overflow-hidden grid grid-cols-1">

            <!-- Right Side: Register Form -->
            <div class="p-12 lg:p-20 flex flex-col justify-center bg-white">
                <div class="max-w-md mx-auto w-full">
                    <div class="mb-10">
                        <h2 class="text-3xl font-black text-gray-900 mb-2">Create Account</h2>
                        <p class="text-gray-500">
                            Already have an account? 
                            <a href="{% url 'accounts:login' %}" class="text-[#003d29] font-bold hover:underline">Login here</a>
                        </p>
                    </div>

                    <form method="post" class="space-y-5">
                        {% csrf_token %}
                        
                        {% if form.non_field_errors %}
                        <div class="p-4 bg-red-50 border-l-4 border-red-500 text-red-700 text-sm rounded-r-xl mb-4">
                            {% for error in form.non_field_errors %}{{ error }}{% endfor %}
                        </div>
                        {% endif %}

                        <div class="grid grid-cols-2 gap-4">
                            <div class="space-y-2">
                                <label class="text-sm font-bold text-gray-700 ml-1">First Name</label>
                                <input type="text" name="first_name" required id="id_first_name" 
                                    class="block w-full px-4 py-4 bg-gray-50 border border-gray-100 rounded-2xl text-gray-900 focus:outline-none focus:ring-2 focus:ring-[#003d29]/20 focus:border-[#003d29] transition-all"
                                    placeholder="John">
                            </div>
                            <div class="space-y-2">
                                <label class="text-sm font-bold text-gray-700 ml-1">Last Name</label>
                                <input type="text" name="last_name" required id="id_last_name" 
                                    class="block w-full px-4 py-4 bg-gray-50 border border-gray-100 rounded-2xl text-gray-900 focus:outline-none focus:ring-2 focus:ring-[#003d29]/20 focus:border-[#003d29] transition-all"
                                    placeholder="Doe">
                            </div>
                        </div>

                        <div class="space-y-2">
                            <label class="text-sm font-bold text-gray-700 ml-1">Username</label>
                            <div class="relative group">
                                <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none text-gray-400 group-focus-within:text-[#003d29] transition-colors">
                                    <i class="fas fa-user"></i>
                                </div>
                                <input type="text" name="username" required id="id_username" 
                                    class="block w-full pl-11 pr-4 py-4 bg-gray-50 border border-gray-100 rounded-2xl text-gray-900 focus:outline-none focus:ring-2 focus:ring-[#003d29]/20 focus:border-[#003d29] transition-all"
                                    placeholder="johndoe123">
                            </div>
                        </div>

                        <div class="space-y-2">
                            <label class="text-sm font-bold text-gray-700 ml-1">Email Address</label>
                            <div class="relative group">
                                <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none text-gray-400 group-focus-within:text-[#003d29] transition-colors">
                                    <i class="fas fa-envelope"></i>
                                </div>
                                <input type="email" name="email" required id="id_email" 
                                    class="block w-full pl-11 pr-4 py-4 bg-gray-50 border border-gray-100 rounded-2xl text-gray-900 focus:outline-none focus:ring-2 focus:ring-[#003d29]/20 focus:border-[#003d29] transition-all"
                                    placeholder="name@company.com">
                            </div>
                        </div>

                        <div class="space-y-2">
                            <label class="text-sm font-bold text-gray-700 ml-1 block">I want to join as:</label>
                            <div class="grid grid-cols-3 gap-3">
                                {% for choice in form.role %}
                                <div class="relative">
                                    <input type="radio" name="role" value="{{ choice.data.value }}" id="{{ choice.id_for_label }}" class="peer hidden" {% if choice.data.selected %}checked{% endif %}>
                                    <label for="{{ choice.id_for_label }}" class="flex items-center justify-center px-2 py-3 bg-gray-50 border border-gray-100 rounded-xl cursor-pointer peer-checked:border-[#003d29] peer-checked:bg-[#003d29]/5 peer-checked:text-[#003d29] font-bold text-[10px] sm:text-xs transition-all hover:bg-gray-100 text-center min-h-[50px]">
                                        {{ choice.choice_label }}
                                    </label>
                                </div>
                                {% endfor %}
                            </div>
                        </div>

                        <div class="grid grid-cols-2 gap-4">
                            <div class="space-y-2">
                                <label class="text-sm font-bold text-gray-700 ml-1">Password</label>
                                <input type="password" name="password1" required id="id_password1"
                                    class="block w-full px-4 py-4 bg-gray-50 border border-gray-100 rounded-2xl text-gray-900 focus:outline-none focus:ring-2 focus:ring-[#003d29]/20 focus:border-[#003d29] transition-all"
                                    placeholder="••••••••">
                            </div>
                            <div class="space-y-2">
                                <label class="text-sm font-bold text-gray-700 ml-1">Confirm</label>
                                <input type="password" name="password2" required id="id_password2"
                                    class="block w-full px-4 py-4 bg-gray-50 border border-gray-100 rounded-2xl text-gray-900 focus:outline-none focus:ring-2 focus:ring-[#003d29]/20 focus:border-[#003d29] transition-all"
                                    placeholder="••••••••">
                            </div>
                        </div>

                        <button type="submit" class="w-full py-4 mt-4 bg-[#003d29] hover:bg-[#002a1c] text-white font-black rounded-2xl shadow-xl hover:shadow-2xl transition-all transform hover:-translate-y-1 flex items-center justify-center space-x-2 group">
                            <span>Create Account</span>
                            <i class="fas fa-user-plus text-xs group-hover:translate-x-1 transition-transform"></i>
                        </button>
                    </form>

                    <div class="mt-8">
                        <div class="relative flex items-center justify-center mb-8">
                            <div class="flex-grow border-t border-gray-100"></div>
                            <span class="flex-shrink mx-4 text-gray-400 text-xs font-bold uppercase tracking-widest">Or register with</span>
                            <div class="flex-grow border-t border-gray-100"></div>
                        </div>

                        {% load socialaccount %}
                        {% get_providers as socialaccount_providers %}
                        {% for provider in socialaccount_providers %}
                            {% if provider.id == "google" %}
                            <a href="{% provider_login_url provider.id %}" class="w-full flex items-center justify-center gap-3 border border-gray-100 rounded-2xl py-4 text-sm font-bold text-gray-700 hover:bg-gray-50 transition-all shadow-sm">
                                <img src="https://www.svgrepo.com/show/475656/google-color.svg" class="w-5 h-5" alt="Google">
                                <span>Continue with Google</span>
                            </a>
                            {% endif %}
                        {% endfor %}
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}
