{% extends "base.html" %}

{% block title %}Courses - EjoHePlus{% endblock %}

{% block extra_css %}
{% include "partials/home_styles.html" %}
{% endblock %}

{% block content %}
<section class="section">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex items-center justify-between mb-6">
            <div>
                <p class="section-subtitle"><i class="fas fa-book-open mr-2"></i>Courses</p>
                <h2 class="section-title">Upcoming <span class="highlight">Courses</span></h2>
            </div>
            {% if user.is_authenticated %}
                {% if user.is_mentor or user.is_partner or user.is_administrator %}
                    <a href="{% url 'courses:course_create' %}" class="section-button">Create Course</a>
                {% endif %}
            {% endif %}
        </div>
        <div id="trainings-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"></div>
    </div>
</section>

<script>
    fetch('/api/courses/?limit=12')
        .then(response => response.json())
        .then(data => {
            const grid = document.getElementById('trainings-grid');
            if (!grid) return;
            const items = data.results || data;
            if (!items.length) {
                grid.innerHTML = '<div class="text-sm text-gray-500">No courses available.</div>';
                return;
            }
            grid.innerHTML = items.map(item => `
                <a href="/courses/${item.slug}/" class="training-card">
                    <div class="training-thumb" style="background-image:url('${item.thumbnail || ''}'); background-size: cover; background-position: center;">
                        <span class="training-tag">${item.category || item.level}</span>
                        <i class="fas fa-chalkboard-teacher"></i>
                    </div>
                    <div class="training-body">
                        <div class="training-title">${item.title}</div>
                        <div class="training-meta">
                            <span><i class="fas fa-clock mr-1"></i>${item.duration_hours || 0} hrs</span>
                            <span class="training-price">${item.is_free ? 'Free' : `$${item.price}`}</span>
                        </div>
                    </div>
                </a>
            `).join('');
        });
</script>
{% endblock %}
